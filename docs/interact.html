<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Web Mapping and Analysis - 6&nbsp; Interactivity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./choro.html" rel="next">
<link href="./mapdesign.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta name="twitter:title" content="Web Mapping and Analysis - 6&nbsp; Interactivity">
<meta name="twitter:description" content="Elisabetta Pietrostefani">
<meta name="twitter:creator" content="@EPietrostefani">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interactivity</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Web Mapping and Analysis</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/GDSL-UL/wma" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Download" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-download"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Web-Mapping-and-Analysis.pdf">
            <i class="bi bi-bi-file-pdf pe-1"></i>
          Download PDF
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="./Web-Mapping-and-Analysis.epub">
            <i class="bi bi-bi-journal pe-1"></i>
          Download ePub
          </a>
        </li>
    </ul>
    <a href="" title="Share" id="sidebar-tool-dropdown-1" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-1">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link">Syllabus</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./overview.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assess.html" class="sidebar-item-text sidebar-link">Assessments</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./webarch.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Web architecture</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dataarch.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data architectures</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apis.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">APIs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mapdesign.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Map design</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interact.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interactivity</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./choro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Statistical visualisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dashboards.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Dashboards</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./techgallery.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Technology Gallery</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#lecture" id="toc-lecture" class="nav-link active" data-scroll-target="#lecture"><span class="toc-section-number">6.1</span>  Lecture</a></li>
  <li><a href="#lab" id="toc-lab" class="nav-link" data-scroll-target="#lab"><span class="toc-section-number">6.2</span>  Lab</a>
  <ul class="collapse">
  <li><a href="#getting-to-know-kepler.gl" id="toc-getting-to-know-kepler.gl" class="nav-link" data-scroll-target="#getting-to-know-kepler.gl"><span class="toc-section-number">6.2.1</span>  Getting to know Kepler.gl</a></li>
  <li><a href="#interactivity" id="toc-interactivity" class="nav-link" data-scroll-target="#interactivity"><span class="toc-section-number">6.2.2</span>  Interactivity</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="toc-section-number">6.3</span>  References</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/GDSL-UL/wma/edit/main/interact.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Interactivity</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Elisabetta Pietrostefani</p>
<p><strong>Lecture</strong>: Interactivity</p>
<p><strong>Lab</strong>: Designing for interactivity with Kepler.gl</p>
<section id="lecture" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="lecture"><span class="header-section-number">6.1</span> Lecture</h2>
<p>Slides can be downloaded <a href="https://github.com/GDSL-UL/wma/raw/main/pdf/lecture_07.pdf">here</a></p>
</section>
<section id="lab" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="lab"><span class="header-section-number">6.2</span> Lab</h2>
<p>In this lab, we are going to get our hands dirty and play with different elements that allow us to make a map interactive. We will do so using Kepler/gl, which makes possible (and even fun!) to work interactivity into a map in different ways.</p>
<p>As we go through the hands-on aspect of this block, please keep the lecture slides handy and revisit them as much as you need to. As always, the real challenge is not to learn how to use a piece of software, but how to apply conceptual notions in a practical context.</p>
<p>To complete this lab, you will require the following:</p>
<ul>
<li>The internet</li>
<li><a href="https://kepler.gl/">Kepler.gl</a></li>
</ul>
<section id="getting-to-know-kepler.gl" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="getting-to-know-kepler.gl"><span class="header-section-number">6.2.1</span> Getting to know Kepler.gl</h3>
<p>We will use Kepler to quickly be able to make web maps and explore how you can build interactivity in web maps.</p>
<p>Let us start by open up <a href="https://kepler.gl/">Kepler.gl</a></p>
<p>You should see a dashboard that looks more or less like:</p>
<p><img src="./img/kepler1.png" class="img-fluid" style="width:80.0%"></p>
<p>To start understaning the main features, you can create a “New Map” (either from the dasboard or the “Maps” section, you will be able to find that button), and add the imd2019 dataset we used for Lab 6 (remember, you will find it on the “Shared with you” tab). This will take you to a new page that looks roughly like:</p>
<p>We will use some density data you can download <a href="https://github.com/GDSL-UL/wma/raw/main/data/liverpool_density.geojson.zip">here</a></p>
<p><img src="./img/kepler_adddata.png" class="img-fluid" style="width:80.0%"></p>
<p>Once the dataset has been uploaded, it shows under Layers on the left-hand side panel.</p>
<p><img src="./img/liverpool_kepler.png" class="img-fluid" style="width:80.0%"></p>
<p>Explore the Kepler.gl interface.</p>
<p>Let’s walk through the basics of Kepler.gl as a (web) GIS:</p>
<p><img src="./img/keplerbuttons.png" class="img-fluid" style="width:40.0%"></p>
<ul>
<li><p>Basemap: pick your background</p></li>
<li><p>Main layer: focus on style for now</p>
<ul>
<li><p>STYLE: fill colour, outline, radius</p></li>
<li><p>POP-UP: Tooltips</p></li>
<li><p>LEGEND</p></li>
</ul></li>
</ul>
<p>There is lots of documentation to help you <a href="https://docs.kepler.gl/docs">here</a>.</p>
</section>
<section id="interactivity" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="interactivity"><span class="header-section-number">6.2.2</span> Interactivity</h3>
<p>Now let’s remember the building blocks of interactivity we have learnt in the lecture. We will demonstrate in bold those that we will work through in the lab:</p>
<ul>
<li><p>Filtering</p>
<ul>
<li><p><strong>Pan</strong></p></li>
<li><p><strong>Zoom</strong></p></li>
<li><p><strong>Subset</strong></p></li>
</ul></li>
<li><p>Perspective</p></li>
<li><p>Volume</p></li>
<li><p><strong>Tooltips</strong></p></li>
<li><p>Split</p></li>
<li><p><strong>Animate</strong></p></li>
</ul>
<p>To demonstrate animations, we will use another dataset we have enountered in the past, the CLIWOC ship logs:</p>
<p><a href="https://figshare.com/articles/CLIWOC_Slim_and_Routes/11941224"><code>https://figshare.com/articles/CLIWOC_Slim_and_Routes/11941224</code></a></p>
<p>We will work with individual logs (cliwoc_slim) to create an animation of the logs, for example just showing expeditions between certain date, as in this example of expeditions into the Caribbean.</p>
<p><video src="./img/animate.mp4" class="img-fluid" style="width:80.0%" controls=""><a href="./img/animate.mp4">Video</a></video></p>
<p><strong>Date Prep</strong></p>
<p>First we need the data in a geojson format and to make sure that the time variable is in the correct date-time format. For this we will need to rely on QGIS or R.</p>
<p>In QGIS there are two steps:</p>
<ol type="1">
<li>Import the cliwoc_slim.geopackage as save as geojson</li>
</ol>
<p><img src="./img/save_geojson.png" class="img-fluid" style="width:80.0%"></p>
<ol start="2" type="1">
<li>Change the date variable to a date and time variable. If you don’t do this, kepler.gl won’t recognize it as a date.</li>
</ol>
<p><img src="./img/date_format.png" class="img-fluid" style="width:80.0%"></p>
<p><strong>Back to Kepler.gl</strong></p>
<ul>
<li>Once this is done you can import that data to Kepler.gl.</li>
<li>Inspect the data, focusing on the columns (attributes).</li>
<li>Create a filter by date (or additional filters).</li>
</ul>
<p><img src="./img/filter_kepler.png" class="img-fluid" style="width:40.0%"></p>
<p>Notice the time slider showing on the lower right corner.</p>
<p><img src="./img/interact_kepler.png" class="img-fluid" style="width:80.0%"></p>
<p><strong>Exercise</strong></p>
<p>Now we know the mechanics of interactivity in Kepler.gl, let’s show off! Pick whichever you want first, and have a go at the following maps:</p>
<ol type="1">
<li><p>An animation of global trade over time A map that lets you pick a given country and display its main routes</p></li>
<li><p>A map that lets you identify the vesel ID (id), date, and country of ships around Cape Town</p></li>
<li><p>A choropleth where you can select routes by their length in days</p></li>
<li><p>An animation of each route in the region around Jakarta</p></li>
<li><p>A map that allows you to select a single route, zoom into its origin, and then pan throughout the route</p></li>
</ol>
<p>Once completed, select the one you like best, and post it on Teams.</p>
<p><strong>Presentation</strong></p>
<ul>
<li><p>You will then have 30 seconds to present your favorite map and hit the following points:</p></li>
<li><p>What the map shows What interactivity element(s) you have used One thing you think is really effective about it</p></li>
<li><p>Remember, 30 seconds. Short and sweet. Make them count!</p></li>
</ul>
</section>
</section>
<section id="references" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="references"><span class="header-section-number">6.3</span> References</h2>
<ul>
<li>Tamara Munzner’s <a href="https://www.cs.ubc.ca/~tmm/vadbook/">“Visualization Analysis &amp; Design”</a>. This lecture draws mostly on Chapter 1 (What’s Vis, and Why Do It?).</li>
<li>Andy Kirk’s <a href="https://www.visualisingdata.com/book/">“Data Visualisation: a Handbook for Data Driven Design”</a>.</li>
<li><a href="https://www.mapbox.com/designers">Mapbox’s Guide to Map Design</a>.</li>
<li><a href="https://www.allthatgeo.com/tutorials-animated-geo-temporal-data-visualisation-kepler-gl/">Geo Temporal data visualisation</a></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./mapdesign.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Map design</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./choro.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Statistical visualisation</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Web Mapping and Analysis was written by Elisabetta Pietrostefani and Dani Arribas-Bel.</div>   
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>